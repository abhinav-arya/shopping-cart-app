(this["webpackJsonpshopping-cart-app"]=this["webpackJsonpshopping-cart-app"]||[]).push([[0],{16:function(e){e.exports=JSON.parse('{"CURRENCY":{"IN":"Rs. "}}')},36:function(e,t,a){e.exports=a(64)},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"addCartQnty",(function(){return b})),a.d(n,"reduceCartQnty",(function(){return g})),a.d(n,"removeCartItem",(function(){return N})),a.d(n,"fetchShoppingListSuccess",(function(){return C})),a.d(n,"fetchShoppingListFailure",(function(){return S})),a.d(n,"addToCartComplete",(function(){return y})),a.d(n,"fetchShoppingListPending",(function(){return O})),a.d(n,"fetchShoppingList",(function(){return F})),a.d(n,"addToCart",(function(){return R})),a.d(n,"addCartQuantity",(function(){return T})),a.d(n,"reduceCartQuantity",(function(){return I})),a.d(n,"removeFromCart",(function(){return _}));var r=a(0),c=a.n(r),i=a(19),s=a.n(i),o=(a(41),a(42),a(10)),l=a(11),u=a(13),m=a(14),p=a(5),d=function(e){return c.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0",value:"Search"},c.a.createElement(p.b,{to:{pathname:"/lookup",params:{search:e.searchKey}}},c.a.createElement("i",{className:"fas fa-search"})))},h=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).handleInputChange=function(t){e.setState({searchKey:t.target.value})},e.state={searchKey:""},e}return Object(l.a)(a,[{key:"render",value:function(){return c.a.createElement("nav",{className:"navbar navbar-dark bg-dark"},c.a.createElement("div",{className:"container"},c.a.createElement(p.b,{to:"/",className:"navbar-brand"},c.a.createElement("i",{className:"fas fa-star shop-icon"}),"The ShopKart"),c.a.createElement("span",{className:"form-inline my-2 my-lg-0"},c.a.createElement("input",{id:"search-text",className:"form-control mr-sm-2",type:"search",placeholder:"Search","aria-label":"Search Item",onChange:this.handleInputChange}),c.a.createElement(d,{searchKey:this.state.searchKey}),c.a.createElement(p.b,{to:"/shopping-cart"},c.a.createElement("i",{className:"fas fa-shopping-cart cart-icon"})))))}}]),a}(c.a.Component),f=a(12),E=a(32),v=a.n(E);var b=function(e){return{type:"ADD_CART_QUANTITY",itemSet:e}},g=function(e){return{type:"REDUCE_CART_QUANTITY",itemSet:e}},N=function(e){return{type:"REMOVE_FROM_CART",itemSet:e}},C=function(e){return{type:"GET_SHOPPING_LIST_SUCCESS",response:e}},S=function(e){return{type:"GET_SHOPPING_LIST_FAILURE",error:e}},y=function(e){return{type:"ADD_TO_CART",id:e}},O=function(){return{type:"GET_SHOPPING_LIST_PENDING"}},F=function(){return function(e){return new Promise((function(e,t){v.a.ajax({type:"GET",url:"https://api.myjson.com/bins/qzuzi",format:"json",success:function(t){e(t)},error:function(e){t(e)}})})).then((function(t){e(C(t))})).catch((function(t){e(S(t))}))}},R=function(e){return function(t){t(y(e))}},T=function(e){return function(t){t(b(e))}},I=function(e){return function(t){t(g(e))}},_=function(e){return function(t){t(N(e))}},j=a(21),P=a(33),A=a.n(P),U=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).componentDidUpdate=function(e,t){var a=Math.max.apply(Math,Object(j.a)(n.props.shopState.items.map((function(e){return e.price})))),r=n.state.filterUpdated?n.state.value.min:0,c=n.state.filterUpdated?n.state.value.max:a;n.props.filterToggle(r,c),n.props.shopState.itemsFetchSuccess&&n.props.shopState.items.length>0&&!n.state.filterUpdated&&n.setState({value:{min:r,max:c},maxValue:a,filterUpdated:!0})},n.state={value:{min:0,max:100},maxValue:100,filterUpdated:!1},n}return Object(l.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return t.shopState!==e.shopState}},{key:"render",value:function(){var e=this;return this.props.shopState.itemsFetchSuccess&&this.props.shopState.items.length>0?c.a.createElement(c.a.Fragment,null,c.a.createElement("h5",null,"Filter by Price"),c.a.createElement(A.a,{maxValue:this.state.maxValue,minValue:0,formatLabel:function(e){return"Rs. ".concat(e)},step:50,value:this.state.value,onChange:function(t){return e.setState({value:t})}})):null}}]),a}(c.a.Component),k=Object(f.b)((function(e){return{shopState:e}}))(U),w=a(8),x=a(16),D=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleFilterToggle=function(e,t){n.setState({filterRange:{min:e,max:t},filterRangeRecieved:!0})},n.handleClick=function(e){n.props.actions.addToCart(e)},n.componentDidMount=function(){n.props.actions.fetchShoppingList()},n.state={filterRange:{min:0,max:0},filterRangeRecieved:!1},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.location.params&&this.props.location.params.search.length>3;if(this.props.itemsFetchPending)return c.a.createElement("div",null,c.a.createElement("h5",null,"Please Wait..."));if(this.props.itemsFetchFailure)return c.a.createElement("div",null,c.a.createElement("h5",null,"Oops! Something went wront... ",c.a.createElement("p",null,'Server Response: "',this.props.itemsFetchError,'"')));var a=this.props.items.map((function(a){var n=!t||a.title.toLowerCase()===e.props.location.params.search.toLowerCase();return e.state.filterRangeRecieved&&e.state.filterRange.min<=a.price&&e.state.filterRange.max>=a.price&&n?c.a.createElement("div",{className:"card",key:a.id},c.a.createElement("img",{src:a.img,alt:a.title}),c.a.createElement("span",{className:"card-title"},a.title),c.a.createElement("div",{className:"card-content"},c.a.createElement("p",null,c.a.createElement("b",null,"Price: ",x.CURRENCY.IN," ",a.price))),c.a.createElement("button",{type:"button",onClick:function(){e.handleClick(a.id)},className:"btn btn-warning btn-add-cart"},"Add to Cart")):null}));return c.a.createElement("div",{className:"container container-shopping-list"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"filter-panel col-sm-3"},c.a.createElement(k,{filterToggle:this.handleFilterToggle})),c.a.createElement("div",{className:"box col-sm-9"},a)))}}]),a}(c.a.Component);var L=Object(f.b)((function(e){return{items:e.items,itemsFetchPending:e.itemsFetchPending,itemsFetchSuccess:e.itemsFetchSuccess,itemsFetchFailure:e.itemsFetchFailure,itemsFetchError:e.itemsFetchError}}),(function(e){return{actions:Object(w.b)(n,e)}}))(D),G=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).reduceQuantity=function(t){var a=e.props.items.map((function(e){return t===e.id&&e.quantity>1&&(e.quantity-=1),e}));e.props.actions.reduceCartQuantity(a)},e.addQuantity=function(t){var a=e.props.items.map((function(e){return t===e.id&&(e.quantity+=1),e}));e.props.actions.addCartQuantity(a)},e.removeFromCart=function(t){var a=-1;if(e.props.items.forEach((function(e,n){t===e.id&&(a=n)})),-1!==a){var n=e.props.items;n.splice(a,1),e.props.actions.removeFromCart(n)}},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=0,a=0;this.props.items.forEach((function(e){t+=e.price*e.quantity,a+=e.discount*e.quantity}));var n=this.props.items.length?this.props.items.map((function(t){return c.a.createElement("li",{className:"collection-item cart-item",key:t.id},c.a.createElement("div",{className:"item-img"},c.a.createElement("img",{src:t.img,alt:t.img,className:""}),c.a.createElement("div",{className:"item-desc"},c.a.createElement("span",{className:"title"},t.title),c.a.createElement("p",null,c.a.createElement("b",null,"Price: ",x.CURRENCY.IN,t.price)),c.a.createElement("b",null,"Quantity"),c.a.createElement("div",{className:"add-remove"},c.a.createElement(p.b,{to:"/shopping-cart",onClick:function(){return e.reduceQuantity(t.id)}},c.a.createElement("i",{className:"far fa-minus-square"})),c.a.createElement("b",null,t.quantity),c.a.createElement(p.b,{to:"/shopping-cart",onClick:function(){return e.addQuantity(t.id)}},c.a.createElement("i",{className:"far fa-plus-square"})))),c.a.createElement("button",{className:"btn btn-danger btn-remove-from-cart",type:"submit",onClick:function(){return e.removeFromCart(t.id)}},"Remove")))})):c.a.createElement("p",null,"Oops! Your cart is empty, ",c.a.createElement(p.b,{to:"/"},"let's fill it up?"));return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"cart col-sm-8"},c.a.createElement("h5",null,"Your Shopping Bag:"),c.a.createElement("ul",{className:"collection"},n)),c.a.createElement("div",{className:"cart col-sm-3 cart-detail"},c.a.createElement("h5",null,"Price Details"),c.a.createElement("hr",{className:"line--price-detail"}),c.a.createElement("h6",null,"Price : ",x.CURRENCY.IN,t),c.a.createElement("h6",null,"Discount : ",x.CURRENCY.IN,a),c.a.createElement("hr",{className:"line-price"}),c.a.createElement("h6",null,c.a.createElement("b",null,"Total Payable : ",x.CURRENCY.IN,t-a)))))}}]),a}(c.a.Component);var Q=Object(f.b)((function(e){return{items:e.addedItems}}),(function(e){return{actions:Object(w.b)(n,e)}}))(G),Y=a(15);var q=function(){return c.a.createElement(p.a,null,c.a.createElement("div",{className:"App"},c.a.createElement(h,null),c.a.createElement(Y.c,null,c.a.createElement(Y.a,{exact:!0,path:"/",component:L}),c.a.createElement(Y.a,{path:"/shopping-cart",component:Q}),c.a.createElement(Y.a,{path:"/lookup",component:L}))))},M=a(9),V={items:[],itemsFetchPending:!1,itemsFetchSuccess:!1,itemsFetchFailure:!1,itemsFetchError:"",filterRange:{min:0,max:0},addedItems:[],totalAmount:0},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":var a=e.items.find((function(e){return e.id===t.id})),n=e.addedItems.find((function(e){return e.id===a.id}));return n?(a.quantity+=1,Object(M.a)({},e,{totalAmount:e.totalAmount+a.price})):(a.quantity=1,Object(M.a)({},e,{addedItems:[].concat(Object(j.a)(e.addedItems),[a]),totalAmount:e.totalAmount+a.price}));case"GET_SHOPPING_LIST_SUCCESS":var r=t.response.map((function(e){return{id:e.id,title:e.name,price:e.price,img:e.img_url,discount:e.discount}}));return Object(M.a)({},e,{itemsFetchSuccess:!0,itemsFetchError:!1,itemsFetchPending:!1,items:r});case"GET_SHOPPING_LIST_FAILURE":return Object(M.a)({},e,{itemsFetchSuccess:!1,itemsFetchFailure:!0,itemsFetchPending:!1,itemsFetchError:t.error.responseJSON.message});case"GET_SHOPPING_LIST_PENDING":return Object(M.a)({},e,{itemsFetchFailure:!1,itemsFetchSuccess:!1,itemsFetchPending:!0});case"ADD_CART_QUANTITY":case"REDUCE_CART_QUANTITY":case"REMOVE_FROM_CART":return Object(M.a)({},e,{addedItems:t.itemSet});default:return e}};a(63),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=a(34),J=a(35),B=a.n(J),W=Object(w.c)(H,Object(w.a)(K.a,B.a));s.a.render(c.a.createElement(f.a,{store:W},c.a.createElement(c.a.StrictMode,null,c.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.a53b7935.chunk.js.map